/**
 * @file CanBusAddresses.def
 * @author IR
 * @brief Define incoming CAN line addresses
 * @version 0.2
 * @date 2020-11-15
 * 
 * @copyright Copyright (c) 2020
 * 
 */

#ifndef __ECU_CANBUS_ADDRESSES_H__
// @cond
#define __ECU_CANBUS_ADDRESSES_H__
// @endcond

#include "PPhelp.h"

#define ADD_MC0_OFFSET 0x0000
#define ADD_MC1_OFFSET 0x00D0
#define ADD_BMS_OFFSET 0x0000

// Define addresses values here
// @cond
#define ADD_BMS_SOC 0x06B0 + ADD_BMS_OFFSET
#define ADD_BMS_VOLT 0x00B0 + ADD_BMS_OFFSET
#define ADD_MC0_VOLT 0x0007 + ADD_MC0_OFFSET
#define ADD_MC1_VOLT 0x0007 + ADD_MC1_OFFSET
#define ADD_MC0_RPM 0x0005 + ADD_MC0_OFFSET
#define ADD_MC1_RPM 0x0005 + ADD_MC1_OFFSET
#define ADD_MC0_CURR 0x0006 + ADD_MC0_OFFSET
#define ADD_MC1_CURR 0x0006 + ADD_MC1_OFFSET
#define ADD_MC0_CTRL 0x0020 + ADD_MC0_OFFSET
#define ADD_MC1_CTRL 0x0020 + ADD_MC1_OFFSET
#define ADD_MC0_CLEAR 0x0021 + ADD_MC0_OFFSET
#define ADD_MC1_CLEAR 0x0021 + ADD_MC1_OFFSET
#define ADD_MC0_FAULTS 0x000B + ADD_MC0_OFFSET
#define ADD_MC1_FAULTS 0x000B + ADD_MC1_OFFSET
// canPin addresses
#define ADD_CANPIN_ANALOG0 0x0000
#define ADD_CANPIN_ANALOG1 0x0001
#define ADD_CANPIN_ANALOG2 0x0002
#define ADD_CANPIN_DIGITAL0 0x1000
// Logging address
#define ADD_AUX_LOGGING 0x0000
// @endcond

/**
 * @brief Defines the Can bus addresses that will be used to receive and send data
 * 
 * Every definition is given a direction denoting whether it is incoming(INPUT) or outgoing(OUTPUT)
 * 
 * Unless it is the last entry, this is how to add a new message
 * 
 * X(CAN address, direction) \
 * 
 * Only the last entry should NOT have a '\'
 * 
 * @note Currently, address 0x0000 cannot be used
 */
#define CAN_ADDRESS          \
    X(ADD_BMS_SOC, INPUT)    \
    X(ADD_BMS_VOLT, INPUT)   \
    X(ADD_MC0_VOLT, INPUT)   \
    X(ADD_MC1_VOLT, INPUT)   \
    X(ADD_MC0_RPM, INPUT)    \
    X(ADD_MC1_RPM, INPUT)    \
    X(ADD_MC0_CURR, INPUT)   \
    X(ADD_MC1_CURR, INPUT)   \
    X(ADD_MC0_CTRL, OUTPUT)  \
    X(ADD_MC1_CTRL, OUTPUT)  \
    X(ADD_MC0_CLEAR, OUTPUT) \
    X(ADD_MC1_CLEAR, OUTPUT) \
    X(ADD_MC0_FAULTS, INPUT) \
    X(ADD_MC1_FAULTS, INPUT)

#endif // __ECU_CANBUS_ADDRESSES_H__